<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LEVEL 1</title>
    <style>
        body {
            margin: 0;
            background-repeat: no-repeat;
            background-size: cover;
            background-image: url('https://wallpaperaccess.com/full/25573.jpg');
            position: relative; 
            height: 100vh; 
            overflow: hidden; 
        }
        img {
            position: absolute;
        }
        #timer {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 24px;
            color: white;
            background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent background for readability */
            padding: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body onkeydown="handleKeyDown(event)">
<h1 align="center"><font color="Yellow">LEVEL 1 by ayan</font></h1>

<input id="myText01" type="text" value="" size="50" placeholder="Feedback here" readonly><br>

<input type="button" value="Auto Background Left" onclick="startAutoBackgroundLeft()">
<input type="button" value="Right" onclick="moveImage('right');">
<input type="button" value="Down" onclick="moveImage('down');"><br><br>

<div id="timer">1:00</div>

<img id="myImg01" src="player-sheet0.png" width="100" height="80" style="left: 50px; top: 190px;">
<img id="myImg02" src="coin1-sheet0.png" width="100" height="80" style="left: 350px; top: 190px;">

<script>
    let myGlobalX = 0;
    let myClock;
    let myScore = 10;
    let countdown;

    // Timer initialization
    function startTimer(duration) {
        let timer = duration, minutes, seconds;
        countdown = setInterval(function () {
            minutes = parseInt(timer / 60, 10);
            seconds = parseInt(timer % 60, 10);

            seconds = seconds < 10 ? "0" + seconds : seconds;

            document.getElementById('timer').textContent = minutes + ":" + seconds;

            if (--timer < 0) {
                clearInterval(countdown);
                alert('Time is up! You lose.');
                location.reload(); // Reload the page when time is up
            }
        }, 1000);
    }

    function myHitOther(my1, my2) {
        const rect1 = document.getElementById(my1).getBoundingClientRect();
        const rect2 = document.getElementById(my2).getBoundingClientRect();
        
        return !(rect1.right < rect2.left || 
                 rect1.left > rect2.right || 
                 rect1.bottom < rect2.top || 
                 rect1.top > rect2.bottom);
    }

    function myCheckHit() {
        document.getElementById('myText01').value = myScore;

        if (myHitOther('myImg01', 'myImg02')) {
            resetImgPosition('myImg01');
            myScore--;
            document.getElementById('myText01').value = 'You hit myImg02';
        }
        
        if (myScore <= 0) {
            alert('Sorry, you lose');
            clearInterval(countdown); // Clear the timer when score reaches zero
            location.reload(); 
        }
    }

    function resetImgPosition(imageId) {
        document.getElementById(imageId).style.left = '20px';
    }

    function moveImage(direction) {
        const img = document.getElementById('myImg01');
        if (direction === 'right') {
            img.style.left = parseInt(img.style.left) + 10 + 'px';
        } else if (direction === 'down') {
            img.style.top = parseInt(img.style.top) + 10 + 'px';
        }
        myCheckHit(); 
    }

    function handleKeyDown(event) {
        if (event.key === 'd') {
            moveImage('right');
        }
        if (event.key === 's') {
            moveImage('down');
        }
    }

    function startAutoBackgroundLeft() {
        clearInterval(myClock);
        myGlobalX = 100; 
        myClock = setInterval(function () {
            myGlobalX -= 5;
            document.body.style.backgroundPosition = myGlobalX + 'px 0px';
        }, 100);
    }

    // Start the timer on page load
    window.onload = function() {
        startTimer(60); // Start a 60 seconds timer
    }
</script>
</body>
</html>
